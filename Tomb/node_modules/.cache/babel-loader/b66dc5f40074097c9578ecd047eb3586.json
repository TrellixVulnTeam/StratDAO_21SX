{"ast":null,"code":"var _jsxFileName = \"/Users/anthonymann/Desktop/Snowbank DAO/Tomb/src/views/Bank/components/Stake.tsx\";\nimport React, { useMemo, useContext } from 'react';\nimport styled from 'styled-components'; // import Button from '../../../components/Button';\n\nimport { Button, Card, CardContent } from '@material-ui/core'; // import Card from '../../../components/Card';\n// import CardContent from '../../../components/CardContent';\n\nimport CardIcon from '../../../components/CardIcon';\nimport { AddIcon, RemoveIcon } from '../../../components/icons';\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\nimport IconButton from '../../../components/IconButton';\nimport Label from '../../../components/Label';\nimport Value from '../../../components/Value';\nimport { ThemeContext } from 'styled-components';\nimport useApprove, { ApprovalState } from '../../../hooks/useApprove';\nimport useModal from '../../../hooks/useModal';\nimport useStake from '../../../hooks/useStake';\nimport useZap from '../../../hooks/useZap';\nimport useStakedBalance from '../../../hooks/useStakedBalance';\nimport useStakedTokenPriceInDollars from '../../../hooks/useStakedTokenPriceInDollars';\nimport useTokenBalance from '../../../hooks/useTokenBalance';\nimport useWithdraw from '../../../hooks/useWithdraw';\nimport { getDisplayBalance } from '../../../utils/formatBalance';\nimport DepositModal from './DepositModal';\nimport WithdrawModal from './WithdrawModal';\nimport ZapModal from './ZapModal';\nimport TokenSymbol from '../../../components/TokenSymbol';\n\nconst Stake = ({\n  bank\n}) => {\n  const [approveStatus, approve] = useApprove(bank.depositToken, bank.address);\n  const {\n    color: themeColor\n  } = useContext(ThemeContext);\n  const tokenBalance = useTokenBalance(bank.depositToken);\n  const stakedBalance = useStakedBalance(bank.contract, bank.poolId);\n  const stakedTokenPriceInDollars = useStakedTokenPriceInDollars(bank.depositTokenName, bank.depositToken);\n  const tokenPriceInDollars = useMemo(() => stakedTokenPriceInDollars ? stakedTokenPriceInDollars : null, [stakedTokenPriceInDollars]);\n  const earnedInDollars = (Number(tokenPriceInDollars) * Number(getDisplayBalance(stakedBalance, bank.depositToken.decimal))).toFixed(2);\n  const {\n    onStake\n  } = useStake(bank);\n  const {\n    onZap\n  } = useZap(bank);\n  const {\n    onWithdraw\n  } = useWithdraw(bank);\n  const [onPresentDeposit, onDismissDeposit] = useModal( /*#__PURE__*/React.createElement(DepositModal, {\n    max: tokenBalance,\n    decimals: bank.depositToken.decimal,\n    onConfirm: amount => {\n      if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n      onStake(amount);\n      onDismissDeposit();\n    },\n    tokenName: bank.depositTokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }));\n  const [onPresentZap, onDissmissZap] = useModal( /*#__PURE__*/React.createElement(ZapModal, {\n    decimals: bank.depositToken.decimal,\n    onConfirm: (zappingToken, tokenName, amount) => {\n      if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n      onZap(zappingToken, tokenName, amount);\n      onDissmissZap();\n    },\n    tokenName: bank.depositTokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }));\n  const [onPresentWithdraw, onDismissWithdraw] = useModal( /*#__PURE__*/React.createElement(WithdrawModal, {\n    max: stakedBalance,\n    decimals: bank.depositToken.decimal,\n    onConfirm: amount => {\n      if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n      onWithdraw(amount);\n      onDismissWithdraw();\n    },\n    tokenName: bank.depositTokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }));\n  return /*#__PURE__*/React.createElement(Card, {\n    style: {\n      boxShadow: 'none !important'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardContentInner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TokenSymbol, {\n    symbol: bank.depositToken.symbol,\n    size: 54,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Value, {\n    value: getDisplayBalance(stakedBalance, bank.depositToken.decimal),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    text: `â‰ˆ $${earnedInDollars}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    text: `${bank.depositTokenName} Staked`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(StyledCardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, approveStatus !== ApprovalState.APPROVED ? /*#__PURE__*/React.createElement(Button, {\n    disabled: bank.closedForStaking || approveStatus === ApprovalState.PENDING || approveStatus === ApprovalState.UNKNOWN,\n    onClick: approve,\n    color: \"primary\",\n    variant: \"contained\",\n    style: {\n      marginTop: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, `Approve ${bank.depositTokenName}`) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: onPresentWithdraw,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(RemoveIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(StyledActionSpacer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    disabled: bank.closedForStaking || bank.depositTokenName === 'TOMB-FTM-LP',\n    onClick: () => bank.closedForStaking ? null : onPresentZap(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FlashOnIcon, {\n    style: {\n      color: themeColor.grey[400]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(StyledActionSpacer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    disabled: bank.closedForStaking,\n    onClick: () => bank.closedForStaking ? null : onPresentDeposit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  })))))));\n};\n\nconst StyledCardHeader = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\nconst StyledCardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 28px;\n  width: 100%;\n`;\nconst StyledActionSpacer = styled.div`\n  height: ${props => props.theme.spacing[4]}px;\n  width: ${props => props.theme.spacing[4]}px;\n`;\nconst StyledCardContentInner = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nexport default Stake;","map":{"version":3,"sources":["/Users/anthonymann/Desktop/Snowbank DAO/Tomb/src/views/Bank/components/Stake.tsx"],"names":["React","useMemo","useContext","styled","Button","Card","CardContent","CardIcon","AddIcon","RemoveIcon","FlashOnIcon","IconButton","Label","Value","ThemeContext","useApprove","ApprovalState","useModal","useStake","useZap","useStakedBalance","useStakedTokenPriceInDollars","useTokenBalance","useWithdraw","getDisplayBalance","DepositModal","WithdrawModal","ZapModal","TokenSymbol","Stake","bank","approveStatus","approve","depositToken","address","color","themeColor","tokenBalance","stakedBalance","contract","poolId","stakedTokenPriceInDollars","depositTokenName","tokenPriceInDollars","earnedInDollars","Number","decimal","toFixed","onStake","onZap","onWithdraw","onPresentDeposit","onDismissDeposit","amount","isNaN","onPresentZap","onDissmissZap","zappingToken","tokenName","onPresentWithdraw","onDismissWithdraw","boxShadow","symbol","APPROVED","closedForStaking","PENDING","UNKNOWN","marginTop","grey","StyledCardHeader","div","StyledCardActions","StyledActionSpacer","props","theme","spacing","StyledCardContentInner"],"mappings":"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","sourcesContent":["import React, { useMemo, useContext } from 'react';\nimport styled from 'styled-components';\n\n// import Button from '../../../components/Button';\nimport { Button, Card, CardContent } from '@material-ui/core';\n// import Card from '../../../components/Card';\n// import CardContent from '../../../components/CardContent';\nimport CardIcon from '../../../components/CardIcon';\nimport { AddIcon, RemoveIcon } from '../../../components/icons';\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\nimport IconButton from '../../../components/IconButton';\nimport Label from '../../../components/Label';\nimport Value from '../../../components/Value';\nimport { ThemeContext } from 'styled-components';\n\nimport useApprove, { ApprovalState } from '../../../hooks/useApprove';\nimport useModal from '../../../hooks/useModal';\nimport useStake from '../../../hooks/useStake';\nimport useZap from '../../../hooks/useZap';\nimport useStakedBalance from '../../../hooks/useStakedBalance';\nimport useStakedTokenPriceInDollars from '../../../hooks/useStakedTokenPriceInDollars';\nimport useTokenBalance from '../../../hooks/useTokenBalance';\nimport useWithdraw from '../../../hooks/useWithdraw';\n\nimport { getDisplayBalance } from '../../../utils/formatBalance';\n\nimport DepositModal from './DepositModal';\nimport WithdrawModal from './WithdrawModal';\nimport ZapModal from './ZapModal';\nimport TokenSymbol from '../../../components/TokenSymbol';\nimport { Bank } from '../../../tomb-finance';\n\ninterface StakeProps {\n  bank: Bank;\n}\n\nconst Stake: React.FC<StakeProps> = ({ bank }) => {\n  const [approveStatus, approve] = useApprove(bank.depositToken, bank.address);\n\n  const { color: themeColor } = useContext(ThemeContext);\n  const tokenBalance = useTokenBalance(bank.depositToken);\n  const stakedBalance = useStakedBalance(bank.contract, bank.poolId);\n  const stakedTokenPriceInDollars = useStakedTokenPriceInDollars(bank.depositTokenName, bank.depositToken);\n  const tokenPriceInDollars = useMemo(\n    () => (stakedTokenPriceInDollars ? stakedTokenPriceInDollars : null),\n    [stakedTokenPriceInDollars],\n  );\n  const earnedInDollars = (\n    Number(tokenPriceInDollars) * Number(getDisplayBalance(stakedBalance, bank.depositToken.decimal))\n  ).toFixed(2);\n  const { onStake } = useStake(bank);\n  const { onZap } = useZap(bank);\n  const { onWithdraw } = useWithdraw(bank);\n\n  const [onPresentDeposit, onDismissDeposit] = useModal(\n    <DepositModal\n      max={tokenBalance}\n      decimals={bank.depositToken.decimal}\n      onConfirm={(amount) => {\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n        onStake(amount);\n        onDismissDeposit();\n      }}\n      tokenName={bank.depositTokenName}\n    />,\n  );\n\n  const [onPresentZap, onDissmissZap] = useModal(\n    <ZapModal\n      decimals={bank.depositToken.decimal}\n      onConfirm={(zappingToken, tokenName, amount) => {\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n        onZap(zappingToken, tokenName, amount);\n        onDissmissZap();\n      }}\n      tokenName={bank.depositTokenName}\n    />,\n  );\n\n  const [onPresentWithdraw, onDismissWithdraw] = useModal(\n    <WithdrawModal\n      max={stakedBalance}\n      decimals={bank.depositToken.decimal}\n      onConfirm={(amount) => {\n        if (Number(amount) <= 0 || isNaN(Number(amount))) return;\n        onWithdraw(amount);\n        onDismissWithdraw();\n      }}\n      tokenName={bank.depositTokenName}\n    />,\n  );\n\n  return (\n    <Card style={{ boxShadow: 'none !important'}}>\n      <CardContent>\n        <StyledCardContentInner>\n          <StyledCardHeader>\n            <CardIcon>\n              <TokenSymbol symbol={bank.depositToken.symbol} size={54} />\n            </CardIcon>\n            <Value value={getDisplayBalance(stakedBalance, bank.depositToken.decimal)} />\n            <Label text={`â‰ˆ $${earnedInDollars}`} />\n            <Label text={`${bank.depositTokenName} Staked`} />\n          </StyledCardHeader>\n          <StyledCardActions>\n            {approveStatus !== ApprovalState.APPROVED ? (\n              <Button\n                disabled={\n                  bank.closedForStaking ||\n                  approveStatus === ApprovalState.PENDING ||\n                  approveStatus === ApprovalState.UNKNOWN\n                }\n                onClick={approve}\n                color=\"primary\"\n                variant=\"contained\"\n                style={{ marginTop: '20px' }}\n              >\n                {`Approve ${bank.depositTokenName}`}\n              </Button>\n            ) : (\n              <>\n                <IconButton onClick={onPresentWithdraw}>\n                  <RemoveIcon />\n                </IconButton>\n                <StyledActionSpacer />\n                <IconButton\n                  disabled={bank.closedForStaking || bank.depositTokenName === 'TOMB-FTM-LP'}\n                  onClick={() => (bank.closedForStaking ? null : onPresentZap())}\n                >\n                  <FlashOnIcon style={{ color: themeColor.grey[400] }} />\n                </IconButton>\n                <StyledActionSpacer />\n                <IconButton\n                  disabled={bank.closedForStaking}\n                  onClick={() => (bank.closedForStaking ? null : onPresentDeposit())}\n                >\n                  <AddIcon />\n                </IconButton>\n              </>\n            )}\n          </StyledCardActions>\n        </StyledCardContentInner>\n      </CardContent>\n    </Card>\n  );\n};\n\nconst StyledCardHeader = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\nconst StyledCardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 28px;\n  width: 100%;\n`;\n\nconst StyledActionSpacer = styled.div`\n  height: ${(props) => props.theme.spacing[4]}px;\n  width: ${(props) => props.theme.spacing[4]}px;\n`;\n\nconst StyledCardContentInner = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n\nexport default Stake;\n"]},"metadata":{},"sourceType":"module"}